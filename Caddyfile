loaa.barbuto.family {
    # Route MCP requests to the embedded MCP server on port 3001
    handle /mcp* {
        reverse_proxy loaa:3001
    }

    # All other requests go to the web server on port 3000
    handle {
        reverse_proxy loaa:3000
    }

    # Enable HSTS
    header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

    # Security headers
    header X-Content-Type-Options "nosniff"
    header X-Frame-Options "DENY"
    header Referrer-Policy "strict-origin-when-cross-origin"
}
